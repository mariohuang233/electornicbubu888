# å®¶åº­ç”¨ç”µç›‘æ§ä¸å¯è§†åŒ–ç³»ç»Ÿ

ä¸€ä¸ªåŸºäºNode.jså’ŒReactçš„å®¶åº­ç”¨ç”µç›‘æ§ç³»ç»Ÿï¼Œæ”¯æŒè‡ªåŠ¨æ•°æ®é‡‡é›†ã€å­˜å‚¨å’Œå¯è§†åŒ–å±•ç¤ºã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”„ **è‡ªåŠ¨æ•°æ®é‡‡é›†**: æ¯10åˆ†é’Ÿè‡ªåŠ¨çˆ¬å–ç”µè¡¨æ•°æ®
- ğŸ“Š **æ•°æ®å¯è§†åŒ–**: å¤šç§å›¾è¡¨å±•ç¤ºç”¨ç”µè¶‹åŠ¿
- ğŸ’¾ **æ•°æ®å­˜å‚¨**: MongoDBå­˜å‚¨å†å²æ•°æ®
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯
- ğŸš€ **ä¸€é”®éƒ¨ç½²**: æ”¯æŒRailwayå’ŒZeaburéƒ¨ç½²

## æŠ€æœ¯æ ˆ

### åç«¯
- Node.js + Express
- MongoDB + Mongoose
- Cheerio (ç½‘é¡µè§£æ)
- Node-cron (å®šæ—¶ä»»åŠ¡)
- Winston (æ—¥å¿—ç®¡ç†)

### å‰ç«¯
- React 18
- Ant Design
- ECharts
- React Router

## é¡¹ç›®ç»“æ„

```
elec12/
â”œâ”€â”€ client/                 # Reactå‰ç«¯
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/   # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ App.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”œâ”€â”€ routes/                # APIè·¯ç”±
â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ logs/                  # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ server.js              # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â””â”€â”€ package.json
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd client && npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `config.js` ä¸­çš„MongoDBè¿æ¥å­—ç¬¦ä¸²ï¼Œæˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
export MONGODB_URI="your_mongodb_connection_string"
export PORT=3000
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨åç«¯æœåŠ¡å™¨
npm run dev

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd client && npm start
```

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºå‰ç«¯
cd client && npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start
```

## APIæ¥å£

### æ€»è§ˆæ•°æ®
```
GET /api/overview
```

### è¶‹åŠ¿æ•°æ®
```
GET /api/trend/24h      # 24å°æ—¶è¶‹åŠ¿
GET /api/trend/today    # å½“å¤©ç”¨ç”µ
GET /api/trend/30d      # 30å¤©è¶‹åŠ¿
GET /api/trend/monthly  # æœˆåº¦è¶‹åŠ¿
```

### æ‰‹åŠ¨è§¦å‘çˆ¬è™«
```
POST /api/trigger-scraper
```

### å¥åº·æ£€æŸ¥
```
GET /health
```

## éƒ¨ç½²

### Railwayéƒ¨ç½²

1. è¿æ¥GitHubä»“åº“åˆ°Railway
2. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   - `MONGODB_URI`: MongoDBè¿æ¥å­—ç¬¦ä¸²
   - `NODE_ENV`: production
3. è‡ªåŠ¨éƒ¨ç½²

### Zeaburéƒ¨ç½²

1. è¿æ¥GitHubä»“åº“åˆ°Zeabur
2. è®¾ç½®ç¯å¢ƒå˜é‡
3. é€‰æ‹©Node.jsç¯å¢ƒ
4. è‡ªåŠ¨éƒ¨ç½²

### Dockeréƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t elec-monitor .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 -e MONGODB_URI="your_connection_string" elec-monitor
```

## æ•°æ®æ¨¡å‹

### ç”µè¡¨æ•°æ®
```javascript
{
  meter_id: "18100071580",
  meter_name: "2759å¼„18å·402é˜³å°", 
  remaining_kwh: 9.84,
  collected_at: "2025-09-18T10:10:00Z"
}
```

## å®šæ—¶ä»»åŠ¡

- **é¢‘ç‡**: æ¯10åˆ†é’Ÿ (`*/10 * * * *`)
- **é‡è¯•**: å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•3æ¬¡
- **æ—¥å¿—**: æ‰€æœ‰æ“ä½œè®°å½•åˆ° `logs/` ç›®å½•

## ç›‘æ§ä¸æ—¥å¿—

- åº”ç”¨æ—¥å¿—: `logs/combined.log`
- é”™è¯¯æ—¥å¿—: `logs/error.log`
- å¥åº·æ£€æŸ¥: `/health` ç«¯ç‚¹

## å¼€å‘è¯´æ˜

### çˆ¬è™«é…ç½®

éœ€è¦æ ¹æ®å®é™…ç½‘é¡µç»“æ„è°ƒæ•´ `services/scraper.js` ä¸­çš„é€‰æ‹©å™¨ï¼š

```javascript
extractMeterName($) {
  // æ ¹æ®å®é™…ç½‘é¡µç»“æ„è°ƒæ•´
  return $('.meter-name').text().trim();
}
```

### æ•°æ®è®¡ç®—

ç”¨ç”µé‡è®¡ç®—é€»è¾‘ï¼š
- å•å°æ—¶ç”¨ç”µ = ä¸Šä¸€æ¡å‰©ä½™ç”µé‡ - å½“å‰å‰©ä½™ç”µé‡
- è´Ÿæ•°è§†ä¸ºå……å€¼ï¼ŒæŒ‰0å¤„ç†

## è®¸å¯è¯

MIT License
